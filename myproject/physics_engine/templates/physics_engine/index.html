{% extends "base.html" %}
{% load staticfiles %}

{% block css %}
	<link rel="stylesheet" type="text/css" href=" {% static 'physics_engine/style.css' %} " />
{% endblock %}

{% block content %}
	<h1> Physics Engine </h1>
	</br>
	<p> This is a 2D physics engine that I'm building in order to learn about front-end MV frameworks, I built it using Backbone.js. </p>
	<p> As a physicist, I thought it might be interesting to see what phenomena I might be able to demonstrate using a simple physics engine. </p>
	<p> <em>Please note that while this works as is, it is still under construction. More examples, more functionality, the ability to save scenarios and mobile-friendliness are all in the works. </em> </p>
	</br>
	<p> For the moment, the engine runs using 3 objects: Balls, Springs and Containers. </p>
	<ul>
		<li> Balls, which bounce off each other according to conservation of momentum and fall uniformly under gravity. Their velocity is shown as a black line when the engine is paused. </li>
		<li> Springs, which have a restoring force proportional to their extension, i.e. the more stretched/compressed they are the harder they pull/push back (Hooke's Law). </li>
		<li> Containers, which contain the balls within a certain area. Usually the main one is enough. Starting a ball outside of it's container can cause bizzare behaviour.</li>
	</ul> 
	<p> You can alter the settings of the engine objects in the purple area below, or by clicking and dragging the balls on the engine to change their position/speed. </p>
	<p> Click on "Play" to start playing the simulation or hold down "Step" to step through it frame-by-frame. You can also interact with the engine while it is playing by click and dragging balls around. </p>
	</br>
	<section id="physicsEngine">
		<canvas id="physicsCanvas"></canvas>
		
		<div id="physicsEngineOptions">
			<button id="physicsPlayButton" class="physicsEngineOptions">Play</button>
			<button id="physicsStepButton" class="physicsEngineOptions">Step</button>
			<div id="physicsGOption" class="physicsEngineOptions"><p>g: &nbsp; </p><input><p>px/frame<sup>2</sup></p></div>
			<button id="physicsResetButton" class="physicsEngineOptions">Reset All</button>
		</div>
	
	</section>
	
	{% verbatim %}
	
	<script type="text/template" id="ballTemplate">
		<li><h3> <%- name %> (<%- id %>)</h3></li>
	</script>
	
	<script type="text/template" id="columnTemplate">
	<ul class="column textColumn">
		<% for (var i=0; i < text.length; i++) { %>
			<li><%= text[i] %></li>
		<% } %>
	</ul>
	</script>
	
	<script type="text/template" id="statsColumnTemplate">
	<div class="column statsColumn">
		<% for (var i=0; i < stats.length; i++) { %>
			<p><%= stats[i] %></p>
		<% } %>
	</div>
	</script>

	<script type="text/template" id="editColumnTemplate">	
	<div class="column inputColumn">
		<% for (var i=0; i < attrs.length; i++) { %>
			<% if (attrs[i].type === "inputFloat") { %>
				<input class="editAttr inputAttr floatAttr" data-attr=<%-attrs[i].attr%>>
			<% } %>
			<% if (attrs[i].type === "inputFloat/Array") { %>
				<input class="editAttr inputAttr floatAttr arrayAttr" data-attr=<%-attrs[i].attr%>>
			<% } %>
			<% if (attrs[i].type === "inputString") { %>
				<input class="editAttr inputAttr stringAttr" data-attr=<%-attrs[i].attr%>>
			<% } %>
			<% if (attrs[i].type === "bool") { %>
				<button class="editAttr toggleAttr" data-attr=<%-attrs[i].attr%>>Toggle</button>
			<% } %>
		<% } %>
	</div>
	</script>

	{% endverbatim %}
{% endblock %}

{% block js %}

<!--
	<script src="{% static 'physics_engine/bouncingBallsAnim.js' %}"></script>
-->
	
	<script src=" {% static 'js/lib/underscore.js' %} "></script>
	<script src=" {% static 'js/lib/backbone.js' %} "></script>
	<script src=" {% static 'js/lib/backbone.localStorage.js' %} "></script>
	
	<script src=" {% static 'physics_engine/js/helpers/mathHelpers.js' %} "></script>
	<script src=" {% static 'physics_engine/js/helpers/mainSetup.js' %} "></script>
	<script src=" {% static 'physics_engine/js/routers/physicsRouter.js' %} "></script>
	<script src=" {% static 'physics_engine/js/models/container.js' %} "></script>
	<script src=" {% static 'physics_engine/js/collections/containerList.js' %} "></script>
	<script src=" {% static 'physics_engine/js/models/ball.js' %} "></script>
	<script src=" {% static 'physics_engine/js/collections/ballList.js' %} "></script>
	<script src=" {% static 'physics_engine/js/models/spring.js' %} "></script>
	<script src=" {% static 'physics_engine/js/collections/springList.js' %} "></script>
	<script src=" {% static 'physics_engine/js/views/editChildView.js' %} "></script>
	<script src=" {% static 'physics_engine/js/views/editView.js' %} "></script>
	<script src=" {% static 'physics_engine/js/models/options.js' %} "></script>
	<script src=" {% static 'physics_engine/js/views/optionsView.js' %} "></script>
	<script src=" {% static 'physics_engine/js/views/canvasView.js' %} "></script>
	<script src=" {% static 'physics_engine/js/views/appView.js' %} "></script>
	
{% endblock %}

